Version 4
SHEET 1 1612 1244
WIRE 1040 16 912 16
WIRE 1248 16 1104 16
WIRE 1216 96 1216 -32
WIRE 1216 96 1184 96
WIRE 1120 112 1056 112
WIRE 1216 128 1184 128
WIRE 1120 144 1104 144
WIRE 1248 144 1248 16
WIRE 1296 144 1248 144
WIRE 1392 144 1360 144
WIRE 1424 144 1392 144
WIRE 816 160 720 160
WIRE 912 160 912 16
WIRE 912 160 896 160
WIRE 928 160 912 160
WIRE 1056 160 1056 112
WIRE 1056 160 1008 160
WIRE 1248 160 1248 144
WIRE 1248 160 1184 160
WIRE 720 176 720 160
WIRE 1392 192 1392 144
WIRE 1056 208 1056 160
WIRE 1104 224 1104 144
WIRE 1248 224 1248 160
WIRE 1248 224 1104 224
WIRE 144 240 16 240
WIRE 352 240 208 240
WIRE 1216 272 1216 128
WIRE 720 304 720 256
WIRE 1056 304 1056 272
WIRE 320 320 320 192
WIRE 320 320 288 320
WIRE 224 336 160 336
WIRE 320 352 288 352
WIRE 224 368 208 368
WIRE 352 368 352 240
WIRE 400 368 352 368
WIRE 496 368 464 368
WIRE 528 368 496 368
WIRE -80 384 -176 384
WIRE 16 384 16 240
WIRE 16 384 0 384
WIRE 32 384 16 384
WIRE 160 384 160 336
WIRE 160 384 112 384
WIRE 352 384 352 368
WIRE 352 384 288 384
WIRE -176 400 -176 384
WIRE 496 416 496 368
WIRE 160 432 160 384
WIRE 208 448 208 368
WIRE 352 448 352 384
WIRE 352 448 208 448
WIRE 320 496 320 352
WIRE -176 528 -176 480
WIRE 160 528 160 496
WIRE 944 576 816 576
WIRE 1152 576 1008 576
WIRE 1120 656 1120 528
WIRE 1120 656 1088 656
WIRE 1024 672 960 672
WIRE 1120 688 1088 688
WIRE 1024 704 1008 704
WIRE 1152 704 1152 576
WIRE 1200 704 1152 704
WIRE 1296 704 1264 704
WIRE 1328 704 1296 704
WIRE -400 720 -400 656
WIRE 720 720 624 720
WIRE 816 720 816 576
WIRE 816 720 800 720
WIRE 832 720 816 720
WIRE 960 720 960 672
WIRE 960 720 912 720
WIRE 1152 720 1152 704
WIRE 1152 720 1088 720
WIRE 624 736 624 720
WIRE 1296 752 1296 704
WIRE 960 768 960 720
WIRE 1008 784 1008 704
WIRE 1152 784 1152 720
WIRE 1152 784 1008 784
WIRE -400 816 -400 800
WIRE -272 816 -400 816
WIRE 128 832 0 832
WIRE 336 832 192 832
WIRE 1120 832 1120 688
WIRE -400 848 -400 816
WIRE 624 864 624 816
WIRE 960 864 960 832
WIRE 304 912 304 784
WIRE 304 912 272 912
WIRE 208 928 144 928
WIRE 304 944 272 944
WIRE -400 960 -400 928
WIRE 208 960 192 960
WIRE 336 960 336 832
WIRE 384 960 336 960
WIRE 480 960 448 960
WIRE 512 960 480 960
WIRE -96 976 -192 976
WIRE 0 976 0 832
WIRE 0 976 -16 976
WIRE 16 976 0 976
WIRE 144 976 144 928
WIRE 144 976 96 976
WIRE 336 976 336 960
WIRE 336 976 272 976
WIRE -192 992 -192 976
WIRE 480 1008 480 960
WIRE 144 1024 144 976
WIRE 192 1040 192 960
WIRE 336 1040 336 976
WIRE 336 1040 192 1040
WIRE 304 1088 304 944
WIRE -192 1120 -192 1072
WIRE 144 1120 144 1088
FLAG -400 656 V+
FLAG -400 960 0
FLAG -272 816 PE
FLAG 160 528 PE
FLAG -176 528 PE
FLAG 528 368 OUT1
FLAG 496 496 0
FLAG 320 496 0
FLAG 320 192 V+
FLAG 144 1120 PE
FLAG -192 1120 PE
FLAG 512 960 OUT2
FLAG 480 1088 0
FLAG 304 1088 0
FLAG 304 784 V+
FLAG 960 864 PE
FLAG 624 864 PE
FLAG 1328 704 OUT3
FLAG 1296 832 0
FLAG 1120 832 0
FLAG 1120 528 V+
FLAG 1056 304 PE
FLAG 720 304 PE
FLAG 1424 144 OUT4
FLAG 1392 272 0
FLAG 1216 272 0
FLAG 1216 -32 V+
SYMBOL res 128 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 28.7K
SYMBOL res 16 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 28.7K
SYMBOL cap 144 432 R0
SYMATTR InstName C1
SYMATTR Value 220pF
SYMBOL cap 208 224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 440pF
SYMBOL cap 464 352 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 1µF
SYMBOL voltage -400 704 R0
SYMATTR InstName V1
SYMATTR Value 3.2V
SYMBOL voltage -400 832 R0
SYMATTR InstName V2
SYMATTR Value 1.8V
SYMBOL voltage -176 384 R0
WINDOW 123 24 118 Left 2
SYMATTR Value2 AC 1V 0
SYMATTR InstName V3
SYMATTR Value ""
SYMBOL res 480 400 R0
SYMATTR InstName LOAD
SYMATTR Value 100k
SYMBOL res 112 960 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10K
SYMBOL res 0 960 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 18K
SYMBOL cap 128 1024 R0
SYMATTR InstName C4
SYMATTR Value 470pF
SYMBOL cap 192 816 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 1nF
SYMBOL cap 448 944 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 1µF
SYMBOL voltage -192 976 R0
WINDOW 123 24 118 Left 2
SYMATTR Value2 AC 1V 0
SYMATTR InstName V4
SYMATTR Value ""
SYMBOL res 464 992 R0
SYMATTR InstName LOAD1
SYMATTR Value 100k
SYMBOL res 928 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10K
SYMBOL res 816 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10K
SYMBOL cap 944 768 R0
SYMATTR InstName C7
SYMATTR Value 1nF
SYMBOL cap 1008 560 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 1nF
SYMBOL cap 1264 688 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 1µ
SYMBOL voltage 624 720 R0
WINDOW 123 24 118 Left 2
SYMATTR Value2 AC 1V 0
SYMATTR InstName V5
SYMATTR Value ""
SYMBOL res 1280 736 R0
SYMATTR InstName LOAD2
SYMATTR Value 100k
SYMBOL res 1024 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 8.2K
SYMBOL res 912 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 8.2K
SYMBOL cap 1040 208 R0
SYMATTR InstName C10
SYMATTR Value 1nF
SYMBOL cap 1104 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value 1nF
SYMBOL cap 1360 128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value 1µ
SYMBOL voltage 720 160 R0
WINDOW 123 24 118 Left 2
SYMATTR Value2 AC 1V 0
SYMATTR InstName V6
SYMATTR Value ""
SYMBOL res 1376 176 R0
SYMATTR InstName LOAD3
SYMATTR Value 100k
SYMBOL AutoGenerated/EL5220C 240 944 R0
SYMATTR InstName U5
SYMBOL AutoGenerated/EL5220C 256 352 R0
SYMATTR InstName U6
SYMBOL AutoGenerated/EL5220C 1152 128 R0
SYMATTR InstName U7
SYMBOL AutoGenerated/EL5220C 1056 688 R0
SYMATTR InstName U8
TEXT -112 32 Left 2 !.ac lin 100 20 22000\n*.op\n.inc "models/el5220.txt"
TEXT -200 592 Left 2 ;Above is a model of the low pass filter used on the Bela audio cape. \nThis filter has a cutoff of around 17823.81Hz\nThe original op-amp used in the audio cape is a OPA4348 (the ADD8704 is just for the Eagle footprint). \nThe EL5420 is a similar op-amp which could also be used, the most important factor is Rail-to-Rail operation.
TEXT -904 16 Left 2 !* connections:        +input\n*                       |  -input\n*                       |    | +Vsupply\n*                       |    |    | -Vsupply\n*                       |    |    |    |  output\n*                       |    |    |    |    |\n.subckt EL5220C         3    2    8    4    1\n*\n*Input stage\nm1 10 5 9 9 mod2 L=1e-6 W=126e-6\nm2 11 2 9 9 mod2 L=1e-6 W=126e-6\nm3 12 5 14 14 mod1 L=1e-6 W=126e-6\nm4 13 2 14 14 mod1 L=1e-6 W=126e-6\nr1 10 4 4k\nr2 11 4 4k\nr3 12 8 4k\nr4 13 8 4k\nca 10 11 0.5p\ncb 12 13 0.5p\nis1 8 9 50u\nis2 14 4 50u\nvos 5 6 2mV\n*\n*voltage noise\nidn 500 25 3.121mA\ncdn 25 26 1GF\nvdn 26 500 0V\ndn  25 500 den\nh1 6 3 vdn 14\n*\n*G1,G2 stage\ng1 500 15 10 11 2.0e-4\ng2 500 15 12 13 2.0e-4\nrt 15 500 0.8e8\nct 15 1 9pF\nd1 15 20 dx\nd2 21 15 dx\n*\n*output stage\nm5 1 17 8 8 mod2 L=1e-6 W=1000e-6\nm6 1 18 4 4 mod1 L=1e-6 W=1000e-6\ne1 8 17 poly(1) (500, 15) 0.9 1\ne2 18 4 poly(1) (15, 500) 0.9 1\n*\n*Reference voltage\nEref 500 0 poly(2) (8,0) (4,0) 0 0.5 0.5\nesp 20 500 poly(1) (8,4) -0.1 0.5\nesn 21 500 poly(1) (4,8) 0.1 0.5\nIss 8 4 346uA\n*\n.model mod1 nmos (kp=10e-6,VTO=0.8V, lambda=0.01)\n.model mod2 pmos (kp=10e-6,VTO=-0.8V, lambda=0.01)\n.model dx d(N=0.01)\n.model den d(kf=3.2e-13 af=1)\n.ends EL5220C
TEXT -80 1184 Left 2 ;Above is a similar filter using standard E12 resistor and E6 \ncapacitor values. The cutoff is a bit lower, 17303Hz.\nThis filter, however, may oscillate.
TEXT 736 928 Left 2 ;Above is a similar filter using standard E12 resistor and E6 \ncapacitor values. The cutoff is lower, 15915Hz.\nBut this filter will not oscillate and uses very common component values.
TEXT 832 368 Left 2 ;Above is a similar filter using standard E12 resistor and E6 \ncapacitor values. The cutoff is is 19409 Hz. This filter will not oscillate.
